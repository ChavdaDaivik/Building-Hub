(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{698:function(e,t,n){Promise.resolve().then(n.bind(n,8250))},8250:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(7437),a=n(2265),s=n(2510),i=n(2869),d=n(6070),l=n(3578),o=n(6110),c=n(7099),u=n(5974),m=n(5186),f=n(6815),p=n(9270),h=n(401),g=n(4508);let x=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(p.fC,{ref:t,className:(0,g.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...a,children:(0,r.jsx)(p.z$,{className:(0,g.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(h.Z,{className:"h-4 w-4"})})})});x.displayName=p.fC.displayName;var b=n(285),v=n(2735),y=n(6901),j=n(5131),w=n(7413),N=n(5153),I=n(6362);function S(e){let{initialResidents:t}=e,{user:n}=(0,I.a)(),[m,f]=(0,a.useState)(t),[p,h]=(0,a.useState)(s.rC),[g,x]=(0,a.useState)(s.Gm),[S,k]=(0,a.useState)(null),[R,T]=(0,a.useState)(!1),[_,D]=(0,a.useState)(null),{toast:A}=(0,N.pm)();(0,a.useEffect)(()=>{f(t)},[t]);let z=e=>{var t;if(!(null==n?void 0:n.buildingId))return;let r=g.map(t=>t.id===n.buildingId?{...t,residents:t.residents.filter(t=>t.id!==e)}:t),a=p.filter(t=>t.id!==e);h(a),(0,s.o_)(a),x(r),(0,s.D)(r),f((null===(t=r.find(e=>e.id===n.buildingId))||void 0===t?void 0:t.residents)||[]),A({title:"Success",variant:"destructive",description:"Resident has been deleted."})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.Zb,{className:"shadow-lg",children:[(0,r.jsx)(d.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.ll,{children:"All Residents"}),(0,r.jsx)(d.SZ,{children:"A list of all residents in the building."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(o.Vq,{open:R,onOpenChange:e=>{e||k(null),T(e)},children:[(0,r.jsx)(o.hg,{asChild:!0,children:(0,r.jsxs)(i.z,{size:"sm",onClick:()=>k(null),children:[(0,r.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Add Resident"]})}),(0,r.jsx)(C,{resident:S,onSave:e=>{var t;let r;if(null==n?void 0:n.buildingId){if(S)r=g.map(t=>{if(t.id===n.buildingId){let n=t.residents.map(t=>t.id===e.id?{...t,...e}:t);return{...t,residents:n}}return t}),A({title:"Success",description:"Resident information updated."});else{let t="res-".concat(Math.random().toString(36).substr(2,9)),a={...e,id:t,buildingId:n.buildingId},i=a.name.split(" ")[0].toLowerCase().replace(/[^a-z0-9]/g,""),d="".concat(i).concat(Math.floor(900*Math.random())+100),l="".concat(i,"@123"),o=[...p,{id:t,username:d,password:l,role:"resident",entityIds:[t]}];h(o),(0,s.o_)(o),r=g.map(e=>e.id===n.buildingId?{...e,residents:[a,...e.residents]}:e),D({username:d,password:l}),A({title:"Success",description:"New resident has been added."})}x(r),(0,s.D)(r),f((null===(t=r.find(e=>e.id===n.buildingId))||void 0===t?void 0:t.residents)||[]),T(!1),k(null)}},onClose:()=>T(!1)})]}),(0,r.jsxs)(i.z,{size:"sm",variant:"outline",onClick:()=>{let e=encodeURI("data:text/csv;charset=utf-8,ID,Name,Apartment,Phone,Email,MaintenancePaid\n"+m.map(e=>"".concat(e.id,",").concat(e.name,",").concat(e.apartment,",").concat(e.phone,",").concat(e.email,",").concat(e.maintenancePaid)).join("\n")),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","residents.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t),A({title:"Export Successful",description:"Resident data has been exported as a CSV file."})},children:[(0,r.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Export"]})]})]})}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)(l.iA,{children:[(0,r.jsx)(l.xD,{children:(0,r.jsxs)(l.SC,{children:[(0,r.jsx)(l.ss,{children:"Name"}),(0,r.jsx)(l.ss,{children:"Apartment"}),(0,r.jsx)(l.ss,{children:"Contact"}),(0,r.jsx)(l.ss,{children:"Maintenance"}),(0,r.jsx)(l.ss,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(l.RM,{children:m.map(e=>(0,r.jsxs)(l.SC,{children:[(0,r.jsx)(l.pj,{className:"font-medium",children:e.name}),(0,r.jsx)(l.pj,{children:e.apartment}),(0,r.jsx)(l.pj,{children:e.phone}),(0,r.jsx)(l.pj,{children:e.maintenancePaid?(0,r.jsxs)(u.C,{variant:"default",className:"bg-green-100 text-green-800 border-green-200",children:[(0,r.jsx)(y.Z,{className:"mr-1 h-3 w-3"})," Paid"]}):(0,r.jsxs)(u.C,{variant:"destructive",className:"bg-red-100 text-red-800 border-red-200",children:[(0,r.jsx)(j.Z,{className:"mr-1 h-3 w-3"})," Pending"]})}),(0,r.jsx)(l.pj,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{k(e),T(!0)},children:"Edit"}),(0,r.jsxs)(c.aR,{children:[(0,r.jsx)(c.vW,{asChild:!0,children:(0,r.jsxs)(i.z,{variant:"ghost",size:"icon",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[(0,r.jsx)(w.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Delete"})]})}),(0,r.jsxs)(c._T,{children:[(0,r.jsxs)(c.fY,{children:[(0,r.jsx)(c.f$,{children:"Are you absolutely sure?"}),(0,r.jsx)(c.yT,{children:"This action cannot be undone. This will permanently delete the resident's data."})]}),(0,r.jsxs)(c.xo,{children:[(0,r.jsx)(c.le,{children:"Cancel"}),(0,r.jsx)(c.OL,{onClick:()=>z(e.id),children:"Continue"})]})]})]})]})})]},e.id))})]})})]}),_&&(0,r.jsx)(c.aR,{open:!!_,onOpenChange:()=>D(null),children:(0,r.jsxs)(c._T,{children:[(0,r.jsxs)(c.fY,{children:[(0,r.jsx)(c.f$,{children:"Resident Added Successfully!"}),(0,r.jsx)(c.yT,{children:"Please save the following credentials for the new resident. They will need them to log in."})]}),(0,r.jsxs)("div",{className:"my-4 text-sm bg-muted p-4 rounded-md",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Username:"})," ",_.username]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Password:"})," ",_.password]})]}),(0,r.jsx)(c.xo,{children:(0,r.jsx)(c.OL,{onClick:()=>D(null),children:"Close"})})]})})]})}function C(e){let{resident:t,onSave:n,onClose:s}=e,[d,l]=(0,a.useState)({name:(null==t?void 0:t.name)||"",apartment:(null==t?void 0:t.apartment)||"",phone:(null==t?void 0:t.phone)||"",email:(null==t?void 0:t.email)||"",maintenancePaid:(null==t?void 0:t.maintenancePaid)||!1}),c=e=>{let{id:t,value:n}=e.target;l(e=>({...e,[t]:n}))};return(0,r.jsxs)(o.cZ,{className:"sm:max-w-lg",children:[(0,r.jsxs)(o.fK,{children:[(0,r.jsx)(o.$N,{children:t?"Edit Resident":"Add New Resident"}),(0,r.jsx)(o.Be,{children:t?"Update the resident's information.":"Fill in the details for the new resident."})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n({...d,id:null==t?void 0:t.id})},id:"resident-form",className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"name",children:"Name"}),(0,r.jsx)(m.I,{id:"name",value:d.name,onChange:c,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"apartment",children:"Apartment"}),(0,r.jsx)(m.I,{id:"apartment",value:d.apartment,onChange:c,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"phone",children:"Phone"}),(0,r.jsx)(m.I,{id:"phone",value:d.phone,onChange:c,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"email",children:"Email"}),(0,r.jsx)(m.I,{id:"email",type:"email",value:d.email,onChange:c,required:!0})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,r.jsx)(x,{id:"maintenancePaid",checked:d.maintenancePaid,onCheckedChange:e=>l(t=>({...t,maintenancePaid:!!e}))}),(0,r.jsx)(f._,{htmlFor:"maintenancePaid",children:"Maintenance Paid"})]})]}),(0,r.jsxs)(o.cN,{children:[(0,r.jsx)(o.GG,{asChild:!0,children:(0,r.jsx)(i.z,{type:"button",variant:"secondary",onClick:s,children:"Cancel"})}),(0,r.jsx)(i.z,{type:"submit",form:"resident-form",children:"Save changes"})]})]})}function k(){let{user:e}=(0,I.a)();if(!e||!e.buildingId)return null;let t=s.Gm.find(t=>t.id===e.buildingId);return t?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold font-headline",children:"Resident Management"}),(0,r.jsx)(S,{initialResidents:t.residents})]}):(0,r.jsx)("div",{children:"Building not found."})}},7099:function(e,t,n){"use strict";n.d(t,{OL:function(){return x},_T:function(){return m},aR:function(){return l},f$:function(){return h},fY:function(){return f},le:function(){return b},vW:function(){return o},xo:function(){return p},yT:function(){return g}});var r=n(7437),a=n(2265),s=n(277),i=n(4508),d=n(2869);let l=s.fC,o=s.xz,c=s.h_,u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...a,ref:t})});u.displayName=s.aV.displayName;let m=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...a})]})});m.displayName=s.VY.displayName;let f=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};f.displayName="AlertDialogHeader";let p=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};p.displayName="AlertDialogFooter";let h=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold",n),...a})});h.displayName=s.Dx.displayName;let g=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...a})});g.displayName=s.dk.displayName;let x=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.aU,{ref:t,className:(0,i.cn)((0,d.d)(),n),...a})});x.displayName=s.aU.displayName;let b=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.$j,{ref:t,className:(0,i.cn)((0,d.d)({variant:"outline"}),"mt-2 sm:mt-0",n),...a})});b.displayName=s.$j.displayName},5974:function(e,t,n){"use strict";n.d(t,{C:function(){return d}});var r=n(7437);n(2265);var a=n(535),s=n(4508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:n,...a}=e;return(0,r.jsx)("div",{className:(0,s.cn)(i({variant:n}),t),...a})}},2869:function(e,t,n){"use strict";n.d(t,{d:function(){return l},z:function(){return o}});var r=n(7437),a=n(2265),s=n(7053),i=n(535),d=n(4508);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 glow-on-hover variant-default",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 glow-on-hover variant-destructive",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground glow-on-hover variant-default",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground glow-on-hover variant-default",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:n,variant:a,size:i,asChild:o=!1,...c}=e,u=o?s.g7:"button";return(0,r.jsx)(u,{className:(0,d.cn)(l({variant:a,size:i,className:n})),ref:t,...c})});o.displayName="Button"},6070:function(e,t,n){"use strict";n.d(t,{Ol:function(){return d},SZ:function(){return o},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var r=n(7437),a=n(2265),s=n(4508);let i=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...a})});i.displayName="Card";let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",n),...a})});d.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",n),...a})});l.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",n),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",n),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",n),...a})});u.displayName="CardFooter"},6110:function(e,t,n){"use strict";n.d(t,{$N:function(){return g},Be:function(){return x},GG:function(){return u},Vq:function(){return l},cN:function(){return h},cZ:function(){return f},fK:function(){return p},hg:function(){return o}});var r=n(7437),a=n(2265),s=n(9027),i=n(2489),d=n(4508);let l=s.fC,o=s.xz,c=s.h_,u=s.x8,m=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...a})});m.displayName=s.aV.displayName;let f=a.forwardRef((e,t)=>{let{className:n,children:a,...l}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(s.VY,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...l,children:[a,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=s.VY.displayName;let p=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};p.displayName="DialogHeader";let h=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};h.displayName="DialogFooter";let g=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",n),...a})});g.displayName=s.Dx.displayName;let x=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",n),...a})});x.displayName=s.dk.displayName},5186:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(7437),a=n(2265),s=n(4508);let i=a.forwardRef((e,t)=>{let{className:n,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground transition-shadow duration-300 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:shadow-[0_0_10px_2px_hsl(var(--primary)/0.8)]",n),ref:t,...i})});i.displayName="Input"},6815:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(7437),a=n(2265),s=n(6394),i=n(535),d=n(4508);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.f,{ref:t,className:(0,d.cn)(l(),n),...a})});o.displayName=s.f.displayName},3578:function(e,t,n){"use strict";n.d(t,{RM:function(){return l},SC:function(){return o},iA:function(){return i},pj:function(){return u},ss:function(){return c},xD:function(){return d}});var r=n(7437),a=n(2265),s=n(4508);let i=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",n),...a})})});i.displayName="Table";let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",n),...a})});d.displayName="TableHeader";let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",n),...a})});l.displayName="TableBody",a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...a})}).displayName="TableFooter";let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...a})});o.displayName="TableRow";let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...a})});c.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",n),...a})}).displayName="TableCaption"},6281:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return l},V:function(){return d}});var r=n(7437),a=n(2265),s=n(9376),i=n(2510);let d=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[n,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0),u=(0,s.useRouter)();(0,a.useEffect)(()=>{try{let e=localStorage.getItem("building-hub-user");e&&l(JSON.parse(e))}catch(e){console.error("Could not parse user from localStorage",e),localStorage.removeItem("building-hub-user")}finally{c(!1)}},[]);let m=e=>{if(n&&"owner"===n.role){let t={...n,buildingId:e};localStorage.setItem("building-hub-user",JSON.stringify(t)),l(t),u.push("/owner/dashboard")}};return(0,r.jsx)(d.Provider,{value:{user:n,login:(e,t)=>{let n;let r=i.rC,a=i.Gm,s=r.find(n=>n.username===e&&n.password===t);if(!s)return!1;let d=null;if("resident"===s.role){var o;let e=null===(o=s.entityIds)||void 0===o?void 0:o[0];if(!e)return!1;let t=a.find(t=>t.residents.some(t=>t.id===e));if(!t)return!1;d=t.id,n="/resident/dashboard"}else{let e=s.entityIds||[];e.length>0?(d=e[0],n="/owner/dashboard"):(n="/owner/add",d=null)}let c={id:s.id,role:s.role,buildingId:d,entityIds:s.entityIds||[]};return localStorage.setItem("building-hub-user",JSON.stringify(c)),l(c),u.push(n),!0},signup:(e,t)=>{if(i.rC.some(t=>t.username===e))return!1;let n={id:"owner-".concat(e,"-").concat(Date.now()),username:e,password:t,role:"owner",entityIds:[]},r=[...i.rC,n];(0,i.o_)(r);let a={id:n.id,role:n.role,buildingId:null,entityIds:[]};return localStorage.setItem("building-hub-user",JSON.stringify(a)),l(a),u.push("/owner/add"),!0},logout:()=>{localStorage.removeItem("building-hub-user"),l(null),u.push("/login")},loading:o,switchBuilding:m,getBuildingName:e=>{if(!e)return"No Building Selected";let t=i.Gm.find(t=>t.id===e);return(null==t?void 0:t.name)||"Unknown Building"},addBuilding:e=>{if(!n||"owner"!==n.role)return;let t={...e,id:"bldg-".concat(Date.now()),ownerId:n.id,residents:[],services:[],messages:[]},r=[...i.Gm,t];(0,i.D)(r);let a=i.rC.find(e=>e.id===n.id);if(a){let e={...a,entityIds:[...a.entityIds||[],t.id]},r=i.rC.map(t=>t.id===n.id?e:t);(0,i.o_)(r);let s={...n,entityIds:e.entityIds};localStorage.setItem("building-hub-user",JSON.stringify(s)),l(s)}m(t.id)}},children:t})}},5153:function(e,t,n){"use strict";n.d(t,{pm:function(){return m}});var r=n(2265);let a=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?i(n):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],o={toasts:[]};function c(e){o=d(o,e),l.forEach(e=>{e(o)})}function u(e){let{...t}=e,n=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:n});return c({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||r()}}}),{id:n,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function m(){let[e,t]=r.useState(o);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},6362:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var r=n(2265),a=n(6281);let s=()=>{let e=(0,r.useContext)(a.V);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2510:function(e,t,n){"use strict";n.d(t,{D:function(){return o},Gm:function(){return d},o_:function(){return l},rC:function(){return i}});let r=[{id:"bldg-starlight",name:"Starlight Towers",address:"123 Galaxy Way, Metropolis, 54321",floors:20,yearBuilt:2022,ownerId:"owner-daivik",residents:[{id:"res-001",buildingId:"bldg-starlight",name:"Alice Johnson",apartment:"10A",phone:"555-0101",email:"alice.j@email.com",maintenancePaid:!0},{id:"res-002",buildingId:"bldg-starlight",name:"Bob Williams",apartment:"12B",phone:"555-0102",email:"bob.w@email.com",maintenancePaid:!0},{id:"res-003",buildingId:"bldg-starlight",name:"Charlie Brown",apartment:"5C",phone:"555-0103",email:"charlie.b@email.com",maintenancePaid:!1}],services:[{id:"srv-01",name:"City Best Plumbing",contact:"555-0201",type:"Plumbing"},{id:"srv-02",name:"Spark Electricals",contact:"555-0202",type:"Electrician"}],messages:[{id:"msg-1",senderId:"res-001",receiverId:"owner-daivik",text:"Hi, my kitchen sink is leaking.",timestamp:new Date(Date.now()-72e5),read:!1},{id:"msg-2",senderId:"owner-daivik",receiverId:"res-001",text:"Hi Alice, I will send the plumber over tomorrow morning.",timestamp:new Date(Date.now()-33e5),read:!0}]},{id:"bldg-greenwood",name:"Greenwood Plaza",address:"456 Oak Avenue, Forest City, 12345",floors:15,yearBuilt:2018,ownerId:"owner-daivik",residents:[{id:"res-004",buildingId:"bldg-greenwood",name:"David Miller",apartment:"8D",phone:"555-0104",email:"david.m@email.com",maintenancePaid:!0},{id:"res-005",buildingId:"bldg-greenwood",name:"Eve Davis",apartment:"15F",phone:"555-0105",email:"eve.d@email.com",maintenancePaid:!1}],services:[{id:"srv-03",name:"Spotless Cleaners",contact:"555-0203",type:"Cleaning"},{id:"srv-04",name:"Fortress Security",contact:"555-0204",type:"Security"}],messages:[]},{id:"bldg-oceanbreeze",name:"Oceanbreeze Complex",address:"789 Shoreline Dr, Bayside, 67890",floors:30,yearBuilt:2024,ownerId:"owner-maria",residents:[{id:"res-006",buildingId:"bldg-oceanbreeze",name:"Frank Wright",apartment:"22C",phone:"555-0106",email:"frank.w@email.com",maintenancePaid:!0}],services:[],messages:[]}];function a(e,t){try{let t=localStorage.getItem(e);if(t)return JSON.parse(t,(e,t)=>"timestamp"===e&&"string"==typeof t&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(t)?new Date(t):t)}catch(t){console.error("Error parsing ".concat(e," from localStorage"),t),localStorage.removeItem(e)}return t}function s(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){console.error("Error saving ".concat(e," to localStorage"),t)}}let i=a("building-hub-users",[{id:"owner-daivik",username:"Daivik",password:"daivik123",role:"owner",entityIds:["bldg-starlight","bldg-greenwood"]},{id:"owner-maria",username:"maria",password:"maria@123",role:"owner",entityIds:["bldg-oceanbreeze"]},{id:"res-001",username:"alice123",password:"alice@123",role:"resident",entityIds:["res-001"]},{id:"res-002",username:"bob123",password:"bob@123",role:"resident",entityIds:["res-002"]},{id:"res-003",username:"charlie123",password:"charlie@123",role:"resident",entityIds:["res-003"]},{id:"res-004",username:"david123",password:"david@123",role:"resident",entityIds:["res-004"]},{id:"res-005",username:"eve123",password:"eve@123",role:"resident",entityIds:["res-005"]},{id:"res-006",username:"frank123",password:"frank@123",role:"resident",entityIds:["res-006"]}]),d=a("building-hub-buildings",r);function l(e){i=e,s("building-hub-users",e)}function o(e){d=e,s("building-hub-buildings",e)}(()=>{let e=i.find(e=>"owner-daivik"===e.id),t="Daivik",n="daivik123";if(!e||e.username!==t||e.password!==n||"owner"!==e.role){var r;let a=null!==(r=null==e?void 0:e.entityIds)&&void 0!==r?r:["bldg-starlight","bldg-greenwood"];l([...i.filter(e=>"owner-daivik"!==e.id),{id:"owner-daivik",username:t,password:n,role:"owner",entityIds:a}])}})()},4508:function(e,t,n){"use strict";n.d(t,{cn:function(){return s}});var r=n(1994),a=n(3335);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[265,26,121,633,971,117,744],function(){return e(e.s=698)}),_N_E=e.O()}]);