(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68],{3800:function(e,t,r){Promise.resolve().then(r.bind(r,3890))},3890:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var n=r(7437),i=r(6070),s=r(2510),a=r(6362),d=r(5805),l=r(9763);let o=(0,l.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var c=r(3417);let u=(0,l.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);function m(){var e,t,r;let{user:l}=(0,a.a)();if(!l||!l.buildingId)return null;let m=s.Gm.find(e=>e.id===l.buildingId);if(!m)return(0,n.jsx)("div",{children:"Building not found. You may need to select another building."});let{residents:f,messages:g}=m,h=f.length,x=f.filter(e=>e.maintenancePaid).length,v=h-x,b=g.filter(e=>e.receiverId===l.id&&!e.read).length,p=[...f.length>0?[{text:"New resident, ".concat(null===(e=f[0])||void 0===e?void 0:e.name,", was added to Apt ").concat(null===(t=f[0])||void 0===t?void 0:t.apartment,"."),time:"10m ago"}]:[],...g.length>0?[{text:"Message received from a resident.",time:"1h ago"}]:[],...f.length>1?[{text:"Maintenance marked as paid for ".concat(null===(r=f[1])||void 0===r?void 0:r.name,"."),time:"3h ago"}]:[]].slice(0,3);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold font-headline",children:"Owner Dashboard"}),(0,n.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,n.jsxs)(i.Zb,{className:"card-interactive",children:[(0,n.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(i.ll,{className:"text-sm font-medium",children:"Total Residents"}),(0,n.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsxs)(i.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:h}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently in the building"})]})]}),(0,n.jsxs)(i.Zb,{className:"card-interactive",children:[(0,n.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(i.ll,{className:"text-sm font-medium",children:"Maintenance Paid"}),(0,n.jsx)(o,{className:"h-4 w-4 text-green-500"})]}),(0,n.jsxs)(i.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:x}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:[h>0?(x/h*100).toFixed(0):0,"% of residents have paid"]})]})]}),(0,n.jsxs)(i.Zb,{className:"card-interactive",children:[(0,n.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(i.ll,{className:"text-sm font-medium",children:"Maintenance Pending"}),(0,n.jsx)(o,{className:"h-4 w-4 text-destructive"})]}),(0,n.jsxs)(i.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:v}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:[h>0?(v/h*100).toFixed(0):0,"% with pending dues"]})]})]}),(0,n.jsxs)(i.Zb,{className:"card-interactive",children:[(0,n.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(i.ll,{className:"text-sm font-medium",children:"Unread Messages"}),(0,n.jsx)(c.Z,{className:"h-4 w-4 text-yellow-500"})]}),(0,n.jsxs)(i.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:b}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Require your attention"})]})]})]}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{children:"Recent Activity"}),(0,n.jsxs)(i.SZ,{children:["A log of recent events in ",m.name,"."]})]}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("div",{className:"space-y-4",children:p.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-start gap-4 fade-in-up",style:{animationDelay:"".concat(150*t,"ms")},children:[(0,n.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-secondary",children:(0,n.jsx)(u,{className:"h-5 w-5 text-secondary-foreground"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:e.text}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:e.time})]})]},t))})})]})]})}},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return d},SZ:function(){return o},Zb:function(){return a},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var n=r(7437),i=r(2265),s=r(4508);let a=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...i})});a.displayName="Card";let d=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...i})});d.displayName="CardHeader";let l=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...i})});l.displayName="CardTitle";let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...i})});o.displayName="CardDescription";let c=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...i})});c.displayName="CardContent";let u=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...i})});u.displayName="CardFooter"},6281:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return l},V:function(){return d}});var n=r(7437),i=r(2265),s=r(9376),a=r(2510);let d=(0,i.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,i.useState)(null),[o,c]=(0,i.useState)(!0),u=(0,s.useRouter)();(0,i.useEffect)(()=>{try{let e=localStorage.getItem("building-hub-user");e&&l(JSON.parse(e))}catch(e){console.error("Could not parse user from localStorage",e),localStorage.removeItem("building-hub-user")}finally{c(!1)}},[]);let m=e=>{if(r&&"owner"===r.role){let t={...r,buildingId:e};localStorage.setItem("building-hub-user",JSON.stringify(t)),l(t),u.push("/owner/dashboard")}};return(0,n.jsx)(d.Provider,{value:{user:r,login:(e,t)=>{let r;let n=a.rC,i=a.Gm,s=n.find(r=>r.username===e&&r.password===t);if(!s)return!1;let d=null;if("resident"===s.role){var o;let e=null===(o=s.entityIds)||void 0===o?void 0:o[0];if(!e)return!1;let t=i.find(t=>t.residents.some(t=>t.id===e));if(!t)return!1;d=t.id,r="/resident/dashboard"}else{let e=s.entityIds||[];e.length>0?(d=e[0],r="/owner/dashboard"):(r="/owner/add",d=null)}let c={id:s.id,role:s.role,buildingId:d,entityIds:s.entityIds||[]};return localStorage.setItem("building-hub-user",JSON.stringify(c)),l(c),u.push(r),!0},signup:(e,t)=>{if(a.rC.some(t=>t.username===e))return!1;let r={id:"owner-".concat(e,"-").concat(Date.now()),username:e,password:t,role:"owner",entityIds:[]},n=[...a.rC,r];(0,a.o_)(n);let i={id:r.id,role:r.role,buildingId:null,entityIds:[]};return localStorage.setItem("building-hub-user",JSON.stringify(i)),l(i),u.push("/owner/add"),!0},logout:()=>{localStorage.removeItem("building-hub-user"),l(null),u.push("/login")},loading:o,switchBuilding:m,getBuildingName:e=>{if(!e)return"No Building Selected";let t=a.Gm.find(t=>t.id===e);return(null==t?void 0:t.name)||"Unknown Building"},addBuilding:e=>{if(!r||"owner"!==r.role)return;let t={...e,id:"bldg-".concat(Date.now()),ownerId:r.id,residents:[],services:[],messages:[]},n=[...a.Gm,t];(0,a.D)(n);let i=a.rC.find(e=>e.id===r.id);if(i){let e={...i,entityIds:[...i.entityIds||[],t.id]},n=a.rC.map(t=>t.id===r.id?e:t);(0,a.o_)(n);let s={...r,entityIds:e.entityIds};localStorage.setItem("building-hub-user",JSON.stringify(s)),l(s)}m(t.id)}},children:t})}},6362:function(e,t,r){"use strict";r.d(t,{a:function(){return s}});var n=r(2265),i=r(6281);let s=()=>{let e=(0,n.useContext)(i.V);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2510:function(e,t,r){"use strict";r.d(t,{D:function(){return o},Gm:function(){return d},o_:function(){return l},rC:function(){return a}});let n=[{id:"bldg-starlight",name:"Starlight Towers",address:"123 Galaxy Way, Metropolis, 54321",floors:20,yearBuilt:2022,ownerId:"owner-daivik",residents:[{id:"res-001",buildingId:"bldg-starlight",name:"Alice Johnson",apartment:"10A",phone:"555-0101",email:"alice.j@email.com",maintenancePaid:!0},{id:"res-002",buildingId:"bldg-starlight",name:"Bob Williams",apartment:"12B",phone:"555-0102",email:"bob.w@email.com",maintenancePaid:!0},{id:"res-003",buildingId:"bldg-starlight",name:"Charlie Brown",apartment:"5C",phone:"555-0103",email:"charlie.b@email.com",maintenancePaid:!1}],services:[{id:"srv-01",name:"City Best Plumbing",contact:"555-0201",type:"Plumbing"},{id:"srv-02",name:"Spark Electricals",contact:"555-0202",type:"Electrician"}],messages:[{id:"msg-1",senderId:"res-001",receiverId:"owner-daivik",text:"Hi, my kitchen sink is leaking.",timestamp:new Date(Date.now()-72e5),read:!1},{id:"msg-2",senderId:"owner-daivik",receiverId:"res-001",text:"Hi Alice, I will send the plumber over tomorrow morning.",timestamp:new Date(Date.now()-33e5),read:!0}]},{id:"bldg-greenwood",name:"Greenwood Plaza",address:"456 Oak Avenue, Forest City, 12345",floors:15,yearBuilt:2018,ownerId:"owner-daivik",residents:[{id:"res-004",buildingId:"bldg-greenwood",name:"David Miller",apartment:"8D",phone:"555-0104",email:"david.m@email.com",maintenancePaid:!0},{id:"res-005",buildingId:"bldg-greenwood",name:"Eve Davis",apartment:"15F",phone:"555-0105",email:"eve.d@email.com",maintenancePaid:!1}],services:[{id:"srv-03",name:"Spotless Cleaners",contact:"555-0203",type:"Cleaning"},{id:"srv-04",name:"Fortress Security",contact:"555-0204",type:"Security"}],messages:[]},{id:"bldg-oceanbreeze",name:"Oceanbreeze Complex",address:"789 Shoreline Dr, Bayside, 67890",floors:30,yearBuilt:2024,ownerId:"owner-maria",residents:[{id:"res-006",buildingId:"bldg-oceanbreeze",name:"Frank Wright",apartment:"22C",phone:"555-0106",email:"frank.w@email.com",maintenancePaid:!0}],services:[],messages:[]}];function i(e,t){try{let t=localStorage.getItem(e);if(t)return JSON.parse(t,(e,t)=>"timestamp"===e&&"string"==typeof t&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(t)?new Date(t):t)}catch(t){console.error("Error parsing ".concat(e," from localStorage"),t),localStorage.removeItem(e)}return t}function s(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){console.error("Error saving ".concat(e," to localStorage"),t)}}let a=i("building-hub-users",[{id:"owner-daivik",username:"Daivik",password:"daivik123",role:"owner",entityIds:["bldg-starlight","bldg-greenwood"]},{id:"owner-maria",username:"maria",password:"maria@123",role:"owner",entityIds:["bldg-oceanbreeze"]},{id:"res-001",username:"alice123",password:"alice@123",role:"resident",entityIds:["res-001"]},{id:"res-002",username:"bob123",password:"bob@123",role:"resident",entityIds:["res-002"]},{id:"res-003",username:"charlie123",password:"charlie@123",role:"resident",entityIds:["res-003"]},{id:"res-004",username:"david123",password:"david@123",role:"resident",entityIds:["res-004"]},{id:"res-005",username:"eve123",password:"eve@123",role:"resident",entityIds:["res-005"]},{id:"res-006",username:"frank123",password:"frank@123",role:"resident",entityIds:["res-006"]}]),d=i("building-hub-buildings",n);function l(e){a=e,s("building-hub-users",e)}function o(e){d=e,s("building-hub-buildings",e)}(()=>{let e=a.find(e=>"owner-daivik"===e.id),t="Daivik",r="daivik123";if(!e||e.username!==t||e.password!==r||"owner"!==e.role){var n;let i=null!==(n=null==e?void 0:e.entityIds)&&void 0!==n?n:["bldg-starlight","bldg-greenwood"];l([...a.filter(e=>"owner-daivik"!==e.id),{id:"owner-daivik",username:t,password:r,role:"owner",entityIds:i}])}})()},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(1994),i=r(3335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,n.W)(t))}},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(e,t)=>{let r=(0,n.forwardRef)((r,a)=>{let{color:d="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:m,...f}=r;return(0,n.createElement)("svg",{ref:a,...i,width:l,height:l,stroke:d,strokeWidth:c?24*Number(o)/Number(l):o,className:["lucide","lucide-".concat(s(e)),u].join(" "),...f},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},3417:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},5805:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[265,971,117,744],function(){return e(e.s=3800)}),_N_E=e.O()}]);