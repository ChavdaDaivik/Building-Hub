(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9261:function(e,r,t){Promise.resolve().then(t.bind(t,6332))},6332:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return I}});var i=t(7437),s=t(2265),n=t(9376),a=t(6362),l=t(2869),d=t(5186),o=t(6815),u=t(535),c=t(4508);let m=(0,u.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),g=s.forwardRef((e,r)=>{let{className:t,variant:s,...n}=e;return(0,i.jsx)("div",{ref:r,role:"alert",className:(0,c.cn)(m({variant:s}),t),...n})});g.displayName="Alert",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)("h5",{ref:r,className:(0,c.cn)("mb-1 font-medium leading-none tracking-tight",t),...s})}).displayName="AlertTitle";let f=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:r,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",t),...s})});f.displayName="AlertDescription";var h=t(8357),p=t(5863),v=t(401),b=t(3145),x=t(271);let w=x.fC,y=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)(x.aV,{ref:r,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s})});y.displayName=x.aV.displayName;let j=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)(x.xz,{ref:r,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s})});j.displayName=x.xz.displayName;let N=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)(x.VY,{ref:r,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s})});function I(){let[e,r]=(0,s.useState)(""),[t,u]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[x,I]=(0,s.useState)(!1),[k,S]=(0,s.useState)(""),[C,_]=(0,s.useState)(""),[B,D]=(0,s.useState)(""),[P,A]=(0,s.useState)(!1),{login:z,user:E,loading:R,signup:O}=(0,a.a)(),V=(0,n.useRouter)();(0,s.useEffect)(()=>{!R&&E&&("owner"!==E.role||E.buildingId?E.role&&V.replace("/".concat(E.role,"/dashboard")):V.replace("/owner/buildings"))},[E,R,V]);let F=async r=>{r.preventDefault(),m(""),I(!0),await new Promise(e=>setTimeout(e,500)),z(e,t)||m("Invalid credentials. Please try again."),I(!1)},M=async e=>{e.preventDefault(),D(""),A(!0),await new Promise(e=>setTimeout(e,500)),O(k,C)||(D("Username already exists. Please choose another one."),A(!1))};return R||!R&&E?(0,i.jsx)("div",{className:"flex h-screen w-screen items-center justify-center bg-background",children:(0,i.jsx)(p.Z,{className:"h-8 w-8 animate-spin text-primary"})}):(0,i.jsxs)("main",{className:"flex min-h-screen w-full bg-background",children:[(0,i.jsx)("div",{className:"flex-1 lg:flex items-center justify-center p-6 hidden",children:(0,i.jsxs)("div",{className:"relative w-full h-full max-w-md",children:[(0,i.jsx)(b.default,{src:"https://placehold.co/600x800.png",alt:"Building illustration",layout:"fill",objectFit:"cover",className:"rounded-3xl","data-ai-hint":"apartment building modern"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent rounded-3xl"}),(0,i.jsxs)("div",{className:"absolute bottom-10 left-10 text-white",children:[(0,i.jsx)("h2",{className:"font-headline text-4xl font-bold",children:"Building Hub"}),(0,i.jsx)("p",{className:"text-lg mt-2",children:"Your all-in-one building management solution."}),(0,i.jsxs)("ul",{className:"mt-6 space-y-2",children:[(0,i.jsxs)("li",{className:"flex items-center gap-2",children:[(0,i.jsx)(v.Z,{className:"h-5 w-5 text-primary"})," Simplified Management"]}),(0,i.jsxs)("li",{className:"flex items-center gap-2",children:[(0,i.jsx)(v.Z,{className:"h-5 w-5 text-primary"})," Seamless Communication"]}),(0,i.jsxs)("li",{className:"flex items-center gap-2",children:[(0,i.jsx)(v.Z,{className:"h-5 w-5 text-primary"})," Secure & Reliable"]})]})]})]})}),(0,i.jsx)("div",{className:"flex-1 flex items-center justify-center p-6",children:(0,i.jsxs)("div",{className:"w-full max-w-sm",children:[(0,i.jsx)("div",{className:"flex justify-start mb-8",children:(0,i.jsx)(h.G,{})}),(0,i.jsxs)(w,{defaultValue:"login",className:"w-full",children:[(0,i.jsxs)(y,{className:"grid w-full grid-cols-2",children:[(0,i.jsx)(j,{value:"login",children:"Login"}),(0,i.jsx)(j,{value:"signup",children:"Sign Up"})]}),(0,i.jsxs)(N,{value:"login",children:[(0,i.jsx)("h1",{className:"font-headline text-3xl font-bold mt-6",children:"Welcome Back"}),(0,i.jsx)("p",{className:"text-muted-foreground mt-2 mb-6",children:"Enter your credentials to access your account."}),(0,i.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(o._,{htmlFor:"username",children:"Username"}),(0,i.jsx)(d.I,{id:"username",type:"text",placeholder:"e.g., Daivik or alice123",value:e,onChange:e=>r(e.target.value),required:!0})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(o._,{htmlFor:"password",children:"Password"}),(0,i.jsx)(d.I,{id:"password",type:"password",placeholder:"••••••••",value:t,onChange:e=>u(e.target.value),required:!0})]}),c&&(0,i.jsx)(g,{variant:"destructive",children:(0,i.jsx)(f,{children:c})}),(0,i.jsxs)(l.z,{type:"submit",className:"w-full",disabled:x,children:[x&&(0,i.jsx)(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign In"]})]})]}),(0,i.jsxs)(N,{value:"signup",children:[(0,i.jsx)("h1",{className:"font-headline text-3xl font-bold mt-6",children:"Create an Account"}),(0,i.jsx)("p",{className:"text-muted-foreground mt-2 mb-6",children:"Sign up as a new building owner."}),(0,i.jsxs)("form",{onSubmit:M,className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(o._,{htmlFor:"signup-username",children:"Username"}),(0,i.jsx)(d.I,{id:"signup-username",type:"text",placeholder:"Choose a username",value:k,onChange:e=>S(e.target.value),required:!0})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(o._,{htmlFor:"signup-password",children:"Password"}),(0,i.jsx)(d.I,{id:"signup-password",type:"password",placeholder:"Create a strong password",value:C,onChange:e=>_(e.target.value),required:!0})]}),B&&(0,i.jsx)(g,{variant:"destructive",children:(0,i.jsx)(f,{children:B})}),(0,i.jsxs)(l.z,{type:"submit",className:"w-full",disabled:P,children:[P&&(0,i.jsx)(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Account"]})]})]})]}),(0,i.jsx)("p",{className:"text-center text-sm text-muted-foreground mt-8",children:"\xa9 2025 Building Hub. All rights reserved."})]})})]})}N.displayName=x.VY.displayName},8357:function(e,r,t){"use strict";t.d(r,{G:function(){return s}});var i=t(7437);function s(){return(0,i.jsxs)("div",{className:"flex items-center gap-2 group",children:[(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-8 w-8 text-primary building-icon","aria-hidden":"true",children:[(0,i.jsx)("path",{className:"building-part",d:"M4 22h16"}),(0,i.jsx)("path",{className:"building-part",d:"M6 22V8l6-4 6 4v14"}),(0,i.jsx)("path",{className:"building-part",d:"M12 22V12"}),(0,i.jsx)("path",{className:"building-part",d:"M10 9h4"}),(0,i.jsx)("path",{className:"building-part",d:"M10 13h4"}),(0,i.jsx)("path",{className:"building-part",d:"M10 17h4"})]}),(0,i.jsx)("h1",{className:"text-xl font-bold font-headline text-primary",children:"Building Hub"})]})}},2869:function(e,r,t){"use strict";t.d(r,{d:function(){return d},z:function(){return o}});var i=t(7437),s=t(2265),n=t(7053),a=t(535),l=t(4508);let d=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 glow-on-hover variant-default",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 glow-on-hover variant-destructive",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground glow-on-hover variant-default",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground glow-on-hover variant-default",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,r)=>{let{className:t,variant:s,size:a,asChild:o=!1,...u}=e,c=o?n.g7:"button";return(0,i.jsx)(c,{className:(0,l.cn)(d({variant:s,size:a,className:t})),ref:r,...u})});o.displayName="Button"},5186:function(e,r,t){"use strict";t.d(r,{I:function(){return a}});var i=t(7437),s=t(2265),n=t(4508);let a=s.forwardRef((e,r)=>{let{className:t,type:s,...a}=e;return(0,i.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground transition-shadow duration-300 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:shadow-[0_0_10px_2px_hsl(var(--primary)/0.8)]",t),ref:r,...a})});a.displayName="Input"},6815:function(e,r,t){"use strict";t.d(r,{_:function(){return o}});var i=t(7437),s=t(2265),n=t(6394),a=t(535),l=t(4508);let d=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,i.jsx)(n.f,{ref:r,className:(0,l.cn)(d(),t),...s})});o.displayName=n.f.displayName},6281:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return d},V:function(){return l}});var i=t(7437),s=t(2265),n=t(9376),a=t(2510);let l=(0,s.createContext)(void 0),d=e=>{let{children:r}=e,[t,d]=(0,s.useState)(null),[o,u]=(0,s.useState)(!0),c=(0,n.useRouter)();(0,s.useEffect)(()=>{try{let e=localStorage.getItem("building-hub-user");e&&d(JSON.parse(e))}catch(e){console.error("Could not parse user from localStorage",e),localStorage.removeItem("building-hub-user")}finally{u(!1)}},[]);let m=e=>{if(t&&"owner"===t.role){let r={...t,buildingId:e};localStorage.setItem("building-hub-user",JSON.stringify(r)),d(r),c.push("/owner/dashboard")}};return(0,i.jsx)(l.Provider,{value:{user:t,login:(e,r)=>{let t;let i=a.rC,s=a.Gm,n=i.find(t=>t.username===e&&t.password===r);if(!n)return!1;let l=null;if("resident"===n.role){var o;let e=null===(o=n.entityIds)||void 0===o?void 0:o[0];if(!e)return!1;let r=s.find(r=>r.residents.some(r=>r.id===e));if(!r)return!1;l=r.id,t="/resident/dashboard"}else{let e=n.entityIds||[];e.length>0?(l=e[0],t="/owner/dashboard"):(t="/owner/add",l=null)}let u={id:n.id,role:n.role,buildingId:l,entityIds:n.entityIds||[]};return localStorage.setItem("building-hub-user",JSON.stringify(u)),d(u),c.push(t),!0},signup:(e,r)=>{if(a.rC.some(r=>r.username===e))return!1;let t={id:"owner-".concat(e,"-").concat(Date.now()),username:e,password:r,role:"owner",entityIds:[]},i=[...a.rC,t];(0,a.o_)(i);let s={id:t.id,role:t.role,buildingId:null,entityIds:[]};return localStorage.setItem("building-hub-user",JSON.stringify(s)),d(s),c.push("/owner/add"),!0},logout:()=>{localStorage.removeItem("building-hub-user"),d(null),c.push("/login")},loading:o,switchBuilding:m,getBuildingName:e=>{if(!e)return"No Building Selected";let r=a.Gm.find(r=>r.id===e);return(null==r?void 0:r.name)||"Unknown Building"},addBuilding:e=>{if(!t||"owner"!==t.role)return;let r={...e,id:"bldg-".concat(Date.now()),ownerId:t.id,residents:[],services:[],messages:[]},i=[...a.Gm,r];(0,a.D)(i);let s=a.rC.find(e=>e.id===t.id);if(s){let e={...s,entityIds:[...s.entityIds||[],r.id]},i=a.rC.map(r=>r.id===t.id?e:r);(0,a.o_)(i);let n={...t,entityIds:e.entityIds};localStorage.setItem("building-hub-user",JSON.stringify(n)),d(n)}m(r.id)}},children:r})}},6362:function(e,r,t){"use strict";t.d(r,{a:function(){return n}});var i=t(2265),s=t(6281);let n=()=>{let e=(0,i.useContext)(s.V);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2510:function(e,r,t){"use strict";t.d(r,{D:function(){return o},Gm:function(){return l},o_:function(){return d},rC:function(){return a}});let i=[{id:"bldg-starlight",name:"Starlight Towers",address:"123 Galaxy Way, Metropolis, 54321",floors:20,yearBuilt:2022,ownerId:"owner-daivik",residents:[{id:"res-001",buildingId:"bldg-starlight",name:"Alice Johnson",apartment:"10A",phone:"555-0101",email:"alice.j@email.com",maintenancePaid:!0},{id:"res-002",buildingId:"bldg-starlight",name:"Bob Williams",apartment:"12B",phone:"555-0102",email:"bob.w@email.com",maintenancePaid:!0},{id:"res-003",buildingId:"bldg-starlight",name:"Charlie Brown",apartment:"5C",phone:"555-0103",email:"charlie.b@email.com",maintenancePaid:!1}],services:[{id:"srv-01",name:"City Best Plumbing",contact:"555-0201",type:"Plumbing"},{id:"srv-02",name:"Spark Electricals",contact:"555-0202",type:"Electrician"}],messages:[{id:"msg-1",senderId:"res-001",receiverId:"owner-daivik",text:"Hi, my kitchen sink is leaking.",timestamp:new Date(Date.now()-72e5),read:!1},{id:"msg-2",senderId:"owner-daivik",receiverId:"res-001",text:"Hi Alice, I will send the plumber over tomorrow morning.",timestamp:new Date(Date.now()-33e5),read:!0}]},{id:"bldg-greenwood",name:"Greenwood Plaza",address:"456 Oak Avenue, Forest City, 12345",floors:15,yearBuilt:2018,ownerId:"owner-daivik",residents:[{id:"res-004",buildingId:"bldg-greenwood",name:"David Miller",apartment:"8D",phone:"555-0104",email:"david.m@email.com",maintenancePaid:!0},{id:"res-005",buildingId:"bldg-greenwood",name:"Eve Davis",apartment:"15F",phone:"555-0105",email:"eve.d@email.com",maintenancePaid:!1}],services:[{id:"srv-03",name:"Spotless Cleaners",contact:"555-0203",type:"Cleaning"},{id:"srv-04",name:"Fortress Security",contact:"555-0204",type:"Security"}],messages:[]},{id:"bldg-oceanbreeze",name:"Oceanbreeze Complex",address:"789 Shoreline Dr, Bayside, 67890",floors:30,yearBuilt:2024,ownerId:"owner-maria",residents:[{id:"res-006",buildingId:"bldg-oceanbreeze",name:"Frank Wright",apartment:"22C",phone:"555-0106",email:"frank.w@email.com",maintenancePaid:!0}],services:[],messages:[]}];function s(e,r){try{let r=localStorage.getItem(e);if(r)return JSON.parse(r,(e,r)=>"timestamp"===e&&"string"==typeof r&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(r)?new Date(r):r)}catch(r){console.error("Error parsing ".concat(e," from localStorage"),r),localStorage.removeItem(e)}return r}function n(e,r){try{localStorage.setItem(e,JSON.stringify(r))}catch(r){console.error("Error saving ".concat(e," to localStorage"),r)}}let a=s("building-hub-users",[{id:"owner-daivik",username:"Daivik",password:"daivik123",role:"owner",entityIds:["bldg-starlight","bldg-greenwood"]},{id:"owner-maria",username:"maria",password:"maria@123",role:"owner",entityIds:["bldg-oceanbreeze"]},{id:"res-001",username:"alice123",password:"alice@123",role:"resident",entityIds:["res-001"]},{id:"res-002",username:"bob123",password:"bob@123",role:"resident",entityIds:["res-002"]},{id:"res-003",username:"charlie123",password:"charlie@123",role:"resident",entityIds:["res-003"]},{id:"res-004",username:"david123",password:"david@123",role:"resident",entityIds:["res-004"]},{id:"res-005",username:"eve123",password:"eve@123",role:"resident",entityIds:["res-005"]},{id:"res-006",username:"frank123",password:"frank@123",role:"resident",entityIds:["res-006"]}]),l=s("building-hub-buildings",i);function d(e){a=e,n("building-hub-users",e)}function o(e){l=e,n("building-hub-buildings",e)}(()=>{let e=a.find(e=>"owner-daivik"===e.id),r="Daivik",t="daivik123";if(!e||e.username!==r||e.password!==t||"owner"!==e.role){var i;let s=null!==(i=null==e?void 0:e.entityIds)&&void 0!==i?i:["bldg-starlight","bldg-greenwood"];d([...a.filter(e=>"owner-daivik"!==e.id),{id:"owner-daivik",username:r,password:t,role:"owner",entityIds:s}])}})()},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return n}});var i=t(1994),s=t(3335);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,i.W)(r))}}},function(e){e.O(0,[265,26,868,156,971,117,744],function(){return e(e.s=9261)}),_N_E=e.O()}]);