(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5781:function(e,t,r){Promise.resolve().then(r.t.bind(r,7960,23)),Promise.resolve().then(r.bind(r,9556)),Promise.resolve().then(r.bind(r,6281))},9556:function(e,t,r){"use strict";r.d(t,{Toaster:function(){return b}});var i=r(7437),n=r(5153),s=r(2265),a=r(1915),o=r(535),d=r(2489),l=r(4508);let u=a.zt,c=s.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,i.jsx)(a.l_,{ref:t,className:(0,l.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...n})});c.displayName=a.l_.displayName;let m=(0,o.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=s.forwardRef((e,t)=>{let{className:r,variant:n,...s}=e;return(0,i.jsx)(a.fC,{ref:t,className:(0,l.cn)(m({variant:n}),r),...s})});f.displayName=a.fC.displayName,s.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,i.jsx)(a.aU,{ref:t,className:(0,l.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...n})}).displayName=a.aU.displayName;let g=s.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,i.jsx)(a.x8,{ref:t,className:(0,l.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...n,children:(0,i.jsx)(d.Z,{className:"h-4 w-4"})})});g.displayName=a.x8.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,i.jsx)(a.Dx,{ref:t,className:(0,l.cn)("text-sm font-semibold",r),...n})});p.displayName=a.Dx.displayName;let v=s.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,i.jsx)(a.dk,{ref:t,className:(0,l.cn)("text-sm opacity-90",r),...n})});function b(){let{toasts:e}=(0,n.pm)();return(0,i.jsxs)(u,{children:[e.map(function(e){let{id:t,title:r,description:n,action:s,...a}=e;return(0,i.jsxs)(f,{...a,children:[(0,i.jsxs)("div",{className:"grid gap-1",children:[r&&(0,i.jsx)(p,{children:r}),n&&(0,i.jsx)(v,{children:n})]}),s,(0,i.jsx)(g,{})]},t)}),(0,i.jsx)(c,{})]})}v.displayName=a.dk.displayName},6281:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return d},V:function(){return o}});var i=r(7437),n=r(2265),s=r(9376),a=r(2510);let o=(0,n.createContext)(void 0),d=e=>{let{children:t}=e,[r,d]=(0,n.useState)(null),[l,u]=(0,n.useState)(!0),c=(0,s.useRouter)();(0,n.useEffect)(()=>{try{let e=localStorage.getItem("building-hub-user");e&&d(JSON.parse(e))}catch(e){console.error("Could not parse user from localStorage",e),localStorage.removeItem("building-hub-user")}finally{u(!1)}},[]);let m=e=>{if(r&&"owner"===r.role){let t={...r,buildingId:e};localStorage.setItem("building-hub-user",JSON.stringify(t)),d(t),c.push("/owner/dashboard")}};return(0,i.jsx)(o.Provider,{value:{user:r,login:(e,t)=>{let r;let i=a.rC,n=a.Gm,s=i.find(r=>r.username===e&&r.password===t);if(!s)return!1;let o=null;if("resident"===s.role){var l;let e=null===(l=s.entityIds)||void 0===l?void 0:l[0];if(!e)return!1;let t=n.find(t=>t.residents.some(t=>t.id===e));if(!t)return!1;o=t.id,r="/resident/dashboard"}else{let e=s.entityIds||[];e.length>0?(o=e[0],r="/owner/dashboard"):(r="/owner/add",o=null)}let u={id:s.id,role:s.role,buildingId:o,entityIds:s.entityIds||[]};return localStorage.setItem("building-hub-user",JSON.stringify(u)),d(u),c.push(r),!0},signup:(e,t)=>{if(a.rC.some(t=>t.username===e))return!1;let r={id:"owner-".concat(e,"-").concat(Date.now()),username:e,password:t,role:"owner",entityIds:[]},i=[...a.rC,r];(0,a.o_)(i);let n={id:r.id,role:r.role,buildingId:null,entityIds:[]};return localStorage.setItem("building-hub-user",JSON.stringify(n)),d(n),c.push("/owner/add"),!0},logout:()=>{localStorage.removeItem("building-hub-user"),d(null),c.push("/login")},loading:l,switchBuilding:m,getBuildingName:e=>{if(!e)return"No Building Selected";let t=a.Gm.find(t=>t.id===e);return(null==t?void 0:t.name)||"Unknown Building"},addBuilding:e=>{if(!r||"owner"!==r.role)return;let t={...e,id:"bldg-".concat(Date.now()),ownerId:r.id,residents:[],services:[],messages:[]},i=[...a.Gm,t];(0,a.D)(i);let n=a.rC.find(e=>e.id===r.id);if(n){let e={...n,entityIds:[...n.entityIds||[],t.id]},i=a.rC.map(t=>t.id===r.id?e:t);(0,a.o_)(i);let s={...r,entityIds:e.entityIds};localStorage.setItem("building-hub-user",JSON.stringify(s)),d(s)}m(t.id)}},children:t})}},5153:function(e,t,r){"use strict";r.d(t,{pm:function(){return m}});var i=r(2265);let n=0,s=new Map,a=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?a(r):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function u(e){l=o(l,e),d.forEach(e=>{e(l)})}function c(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||i()}}}),{id:r,dismiss:i,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=i.useState(l);return i.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},2510:function(e,t,r){"use strict";r.d(t,{D:function(){return l},Gm:function(){return o},o_:function(){return d},rC:function(){return a}});let i=[{id:"bldg-starlight",name:"Starlight Towers",address:"123 Galaxy Way, Metropolis, 54321",floors:20,yearBuilt:2022,ownerId:"owner-daivik",residents:[{id:"res-001",buildingId:"bldg-starlight",name:"Alice Johnson",apartment:"10A",phone:"555-0101",email:"alice.j@email.com",maintenancePaid:!0},{id:"res-002",buildingId:"bldg-starlight",name:"Bob Williams",apartment:"12B",phone:"555-0102",email:"bob.w@email.com",maintenancePaid:!0},{id:"res-003",buildingId:"bldg-starlight",name:"Charlie Brown",apartment:"5C",phone:"555-0103",email:"charlie.b@email.com",maintenancePaid:!1}],services:[{id:"srv-01",name:"City Best Plumbing",contact:"555-0201",type:"Plumbing"},{id:"srv-02",name:"Spark Electricals",contact:"555-0202",type:"Electrician"}],messages:[{id:"msg-1",senderId:"res-001",receiverId:"owner-daivik",text:"Hi, my kitchen sink is leaking.",timestamp:new Date(Date.now()-72e5),read:!1},{id:"msg-2",senderId:"owner-daivik",receiverId:"res-001",text:"Hi Alice, I will send the plumber over tomorrow morning.",timestamp:new Date(Date.now()-33e5),read:!0}]},{id:"bldg-greenwood",name:"Greenwood Plaza",address:"456 Oak Avenue, Forest City, 12345",floors:15,yearBuilt:2018,ownerId:"owner-daivik",residents:[{id:"res-004",buildingId:"bldg-greenwood",name:"David Miller",apartment:"8D",phone:"555-0104",email:"david.m@email.com",maintenancePaid:!0},{id:"res-005",buildingId:"bldg-greenwood",name:"Eve Davis",apartment:"15F",phone:"555-0105",email:"eve.d@email.com",maintenancePaid:!1}],services:[{id:"srv-03",name:"Spotless Cleaners",contact:"555-0203",type:"Cleaning"},{id:"srv-04",name:"Fortress Security",contact:"555-0204",type:"Security"}],messages:[]},{id:"bldg-oceanbreeze",name:"Oceanbreeze Complex",address:"789 Shoreline Dr, Bayside, 67890",floors:30,yearBuilt:2024,ownerId:"owner-maria",residents:[{id:"res-006",buildingId:"bldg-oceanbreeze",name:"Frank Wright",apartment:"22C",phone:"555-0106",email:"frank.w@email.com",maintenancePaid:!0}],services:[],messages:[]}];function n(e,t){try{let t=localStorage.getItem(e);if(t)return JSON.parse(t,(e,t)=>"timestamp"===e&&"string"==typeof t&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(t)?new Date(t):t)}catch(t){console.error("Error parsing ".concat(e," from localStorage"),t),localStorage.removeItem(e)}return t}function s(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){console.error("Error saving ".concat(e," to localStorage"),t)}}let a=n("building-hub-users",[{id:"owner-daivik",username:"Daivik",password:"daivik123",role:"owner",entityIds:["bldg-starlight","bldg-greenwood"]},{id:"owner-maria",username:"maria",password:"maria@123",role:"owner",entityIds:["bldg-oceanbreeze"]},{id:"res-001",username:"alice123",password:"alice@123",role:"resident",entityIds:["res-001"]},{id:"res-002",username:"bob123",password:"bob@123",role:"resident",entityIds:["res-002"]},{id:"res-003",username:"charlie123",password:"charlie@123",role:"resident",entityIds:["res-003"]},{id:"res-004",username:"david123",password:"david@123",role:"resident",entityIds:["res-004"]},{id:"res-005",username:"eve123",password:"eve@123",role:"resident",entityIds:["res-005"]},{id:"res-006",username:"frank123",password:"frank@123",role:"resident",entityIds:["res-006"]}]),o=n("building-hub-buildings",i);function d(e){a=e,s("building-hub-users",e)}function l(e){o=e,s("building-hub-buildings",e)}(()=>{let e=a.find(e=>"owner-daivik"===e.id),t="Daivik",r="daivik123";if(!e||e.username!==t||e.password!==r||"owner"!==e.role){var i;let n=null!==(i=null==e?void 0:e.entityIds)&&void 0!==i?i:["bldg-starlight","bldg-greenwood"];d([...a.filter(e=>"owner-daivik"!==e.id),{id:"owner-daivik",username:t,password:r,role:"owner",entityIds:n}])}})()},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var i=r(1994),n=r(3335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,i.W)(t))}},7960:function(){}},function(e){e.O(0,[587,265,26,868,858,971,117,744],function(){return e(e.s=5781)}),_N_E=e.O()}]);