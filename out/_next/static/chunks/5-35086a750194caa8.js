(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{8005:function(e,t,s){Promise.resolve().then(s.bind(s,7379))},8357:function(e,t,s){"use strict";s.d(t,{G:function(){return n}});var a=s(7437);function n(){return(0,a.jsxs)("div",{className:"flex items-center gap-2 group",children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-8 w-8 text-primary building-icon","aria-hidden":"true",children:[(0,a.jsx)("path",{className:"building-part",d:"M4 22h16"}),(0,a.jsx)("path",{className:"building-part",d:"M6 22V8l6-4 6 4v14"}),(0,a.jsx)("path",{className:"building-part",d:"M12 22V12"}),(0,a.jsx)("path",{className:"building-part",d:"M10 9h4"}),(0,a.jsx)("path",{className:"building-part",d:"M10 13h4"}),(0,a.jsx)("path",{className:"building-part",d:"M10 17h4"})]}),(0,a.jsx)("h1",{className:"text-xl font-bold font-headline text-primary",children:"Building Hub"})]})}},7379:function(e,t,s){"use strict";s.d(t,{default:function(){return A}});var a=s(7437),n=s(6362),r=s(9376),i=s(2265),l=s(9763);let d=(0,l.Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var o=s(5863);let c=(0,l.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var u=s(875),h=s(8357),f=s(6831),m=s(2869),x=s(4190),p=s(9027),g=s(535),y=s(2489),j=s(4508);let b=p.fC,v=p.xz;p.x8;let w=p.h_,N=i.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(p.aV,{className:(0,j.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n,ref:t})});N.displayName=p.aV.displayName;let k=(0,g.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),M=i.forwardRef((e,t)=>{let{side:s="right",className:n,children:r,...i}=e;return(0,a.jsxs)(w,{children:[(0,a.jsx)(N,{}),(0,a.jsxs)(p.VY,{ref:t,className:(0,j.cn)(k({side:s}),n),...i,children:[r,(0,a.jsxs)(p.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});M.displayName=p.VY.displayName,i.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(p.Dx,{ref:t,className:(0,j.cn)("text-lg font-semibold text-foreground",s),...n})}).displayName=p.Dx.displayName,i.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(p.dk,{ref:t,className:(0,j.cn)("text-sm text-muted-foreground",s),...n})}).displayName=p.dk.displayName;var S=s(9637),Z=s(5805);let z=(0,l.Z)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);var C=s(3417),E=s(285);let V=(0,l.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var R=s(2510);let L={owner:[{href:"/owner/dashboard",icon:S.Z,label:"Dashboard"},{href:"/owner/residents",icon:Z.Z,label:"Residents"},{href:"/owner/services",icon:z,label:"Services"},{href:"/owner/building",icon:d,label:"Building Info"},{href:"/owner/messages",icon:C.Z,label:"Messages"}],resident:[{href:"/resident/dashboard",icon:S.Z,label:"Dashboard"},{href:"/resident/building",icon:d,label:"Building Info"},{href:"/resident/services",icon:z,label:"Nearby Services"},{href:"/resident/messages",icon:C.Z,label:"Messages"}]},I=e=>{let{href:t,children:s}=e,n=(0,r.useRouter)(),i=(0,r.usePathname)().startsWith(t);return(0,a.jsx)(m.z,{variant:"ghost",onClick:()=>n.push(t),className:(0,j.cn)("text-muted-foreground transition-colors hover:text-foreground glow-on-hover variant-default",i&&"text-foreground"),children:s})},W=e=>{let{href:t,children:s,onNavigate:n}=e,i=(0,r.useRouter)(),l=(0,r.usePathname)().startsWith(t);return(0,a.jsx)(m.z,{variant:"ghost",onClick:()=>{i.push(t),n()},className:(0,j.cn)("w-full justify-start",l&&"bg-accent"),children:s})};function A(e){let{children:t,role:s}=e,{user:l,loading:p,logout:g,switchBuilding:y,getBuildingName:j}=(0,n.a)(),w=(0,r.useRouter)(),N=(0,r.usePathname)(),[k,S]=(0,i.useState)(!1),Z=["/owner/buildings","/owner/add"];if((0,i.useEffect)(()=>{p||(l&&l.role===s?"owner"!==s||l.buildingId||Z.includes(N)||w.replace("/owner/buildings"):w.replace("/login"))},[l,p,s,w,N]),p||!l)return(0,a.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,a.jsx)(o.Z,{className:"h-8 w-8 animate-spin text-primary"})});if(Z.includes(N))return(0,a.jsx)(a.Fragment,{children:t});if(l.role!==s||"owner"===s&&!l.buildingId)return(0,a.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,a.jsx)(o.Z,{className:"h-8 w-8 animate-spin text-primary"})});let z="owner"===l.role?R.Gm.filter(e=>(l.entityIds||[]).includes(e.id)):[],C=L[s]||[];return(0,a.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-muted/40",children:[(0,a.jsxs)("header",{className:"sticky top-0 z-30 flex h-14 items-center gap-4 border-b bg-background px-4 sm:static sm:h-auto sm:border-0 sm:bg-transparent sm:px-6",children:[(0,a.jsxs)(b,{open:k,onOpenChange:S,children:[(0,a.jsx)(v,{asChild:!0,children:(0,a.jsxs)(m.z,{size:"icon",variant:"outline",className:"sm:hidden",children:[(0,a.jsx)(c,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle Menu"})]})}),(0,a.jsx)(M,{side:"left",className:"sm:max-w-xs",children:(0,a.jsxs)("nav",{className:"grid gap-6 text-lg font-medium",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 h-14 px-2 border-b",children:(0,a.jsx)(h.G,{})}),C.map(e=>(0,a.jsxs)(W,{href:e.href,onNavigate:()=>S(!1),children:[(0,a.jsx)(e.icon,{className:"h-5 w-5 mr-4"}),e.label]},e.label))]})})]}),(0,a.jsx)("div",{className:"hidden sm:flex items-center gap-2",children:(0,a.jsx)(h.G,{})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:["owner"===l.role&&(0,a.jsxs)(x.h_,{children:[(0,a.jsx)(x.$F,{asChild:!0,children:(0,a.jsxs)(m.z,{variant:"outline",children:[(0,a.jsx)(d,{className:"mr-2 h-4 w-4"}),j(l.buildingId),(0,a.jsx)(u.Z,{className:"ml-2 h-4 w-4"})]})}),(0,a.jsxs)(x.AW,{align:"start",children:[(0,a.jsx)(x.Ju,{children:"Switch Building"}),(0,a.jsx)(x.VD,{}),z.map(e=>(0,a.jsx)(x.Xi,{onClick:()=>y(e.id),children:e.name},e.id)),(0,a.jsx)(x.VD,{}),(0,a.jsxs)(x.Xi,{onClick:()=>w.push("/owner/add"),children:[(0,a.jsx)(E.Z,{className:"mr-2 h-4 w-4"}),"Add New Building"]})]})]}),"resident"===l.role&&(0,a.jsxs)("div",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,a.jsx)(d,{className:"h-4 w-4"}),j(l.buildingId)]})]}),(0,a.jsx)("nav",{className:"hidden sm:flex items-center gap-4 ml-auto",children:C.map(e=>(0,a.jsx)(I,{href:e.href,children:e.label},e.label))}),(0,a.jsx)("div",{className:"flex items-center gap-4 ml-4",children:(0,a.jsxs)(x.h_,{children:[(0,a.jsx)(x.$F,{asChild:!0,children:(0,a.jsxs)(m.z,{variant:"ghost",size:"icon",className:"rounded-full",children:[(0,a.jsxs)(f.qE,{className:"h-8 w-8",children:[(0,a.jsx)(f.F$,{src:"https://placehold.co/40x40.png"}),(0,a.jsx)(f.Q5,{children:l.id.charAt(0).toUpperCase()})]}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle user menu"})]})}),(0,a.jsxs)(x.AW,{align:"end",children:[(0,a.jsx)(x.Ju,{children:"My Account"}),(0,a.jsx)(x.VD,{}),(0,a.jsxs)(x.Xi,{onClick:g,children:[(0,a.jsx)(V,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Log out"})]})]})]})})]}),(0,a.jsx)("main",{className:"flex flex-1 flex-col gap-4 p-4 sm:px-6 sm:py-0 md:gap-8 fade-in-up",children:t})]})}},6831:function(e,t,s){"use strict";s.d(t,{F$:function(){return d},Q5:function(){return o},qE:function(){return l}});var a=s(7437),n=s(2265),r=s(1146),i=s(4508);let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...n})});l.displayName=r.fC.displayName;let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",s),...n})});d.displayName=r.Ee.displayName;let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...n})});o.displayName=r.NY.displayName},9637:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},5863:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3417:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},4369:function(e,t,s){"use strict";var a=s(2265),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=a.useState,i=a.useEffect,l=a.useLayoutEffect,d=a.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!n(e,s)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=r({inst:{value:s,getSnapshot:t}}),n=a[0].inst,c=a[1];return l(function(){n.value=s,n.getSnapshot=t,o(n)&&c({inst:n})},[e,s,t]),i(function(){return o(n)&&c({inst:n}),e(function(){o(n)&&c({inst:n})})},[e]),d(s),s};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},2558:function(e,t,s){"use strict";e.exports=s(4369)},1146:function(e,t,s){"use strict";s.d(t,{NY:function(){return k},Ee:function(){return N},fC:function(){return w}});var a=s(2265),n=s(3966),r=s(6606),i=s(1188),l=s(6840),d=s(2558);function o(){return()=>{}}var c=s(7437),u="Avatar",[h,f]=(0,n.b)(u),[m,x]=h(u),p=a.forwardRef((e,t)=>{let{__scopeAvatar:s,...n}=e,[r,i]=a.useState("idle");return(0,c.jsx)(m,{scope:s,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:(0,c.jsx)(l.WV.span,{...n,ref:t})})});p.displayName=u;var g="AvatarImage",y=a.forwardRef((e,t)=>{let{__scopeAvatar:s,src:n,onLoadingStatusChange:u=()=>{},...h}=e,f=x(g,s),m=function(e,t){let{referrerPolicy:s,crossOrigin:n}=t,r=(0,d.useSyncExternalStore)(o,()=>!0,()=>!1),l=a.useRef(null),c=r?(l.current||(l.current=new window.Image),l.current):null,[u,h]=a.useState(()=>v(c,e));return(0,i.b)(()=>{h(v(c,e))},[c,e]),(0,i.b)(()=>{let e=e=>()=>{h(e)};if(!c)return;let t=e("loaded"),a=e("error");return c.addEventListener("load",t),c.addEventListener("error",a),s&&(c.referrerPolicy=s),"string"==typeof n&&(c.crossOrigin=n),()=>{c.removeEventListener("load",t),c.removeEventListener("error",a)}},[c,n,s]),u}(n,h),p=(0,r.W)(e=>{u(e),f.onImageLoadingStatusChange(e)});return(0,i.b)(()=>{"idle"!==m&&p(m)},[m,p]),"loaded"===m?(0,c.jsx)(l.WV.img,{...h,ref:t,src:n}):null});y.displayName=g;var j="AvatarFallback",b=a.forwardRef((e,t)=>{let{__scopeAvatar:s,delayMs:n,...r}=e,i=x(j,s),[d,o]=a.useState(void 0===n);return a.useEffect(()=>{if(void 0!==n){let e=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(e)}},[n]),d&&"loaded"!==i.imageLoadingStatus?(0,c.jsx)(l.WV.span,{...r,ref:t}):null});function v(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}b.displayName=j;var w=p,N=y,k=b}}]);